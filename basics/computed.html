<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>计算属性 computed | start-from-scratch-learn-Vue</title>
    <meta name="description" content="Just playing around">
    <meta name="generator" content="VuePress 1.3.0">
    
    
    <link rel="preload" href="/start-from-scratch-learn-Vue/assets/css/0.styles.071acc1c.css" as="style"><link rel="preload" href="/start-from-scratch-learn-Vue/assets/js/app.55c1e2f7.js" as="script"><link rel="preload" href="/start-from-scratch-learn-Vue/assets/js/3.5f662852.js" as="script"><link rel="preload" href="/start-from-scratch-learn-Vue/assets/js/36.2bff6695.js" as="script"><link rel="preload" href="/start-from-scratch-learn-Vue/assets/js/14.048f971c.js" as="script"><link rel="preload" href="/start-from-scratch-learn-Vue/assets/js/5.cb2e8bbe.js" as="script"><link rel="preload" href="/start-from-scratch-learn-Vue/assets/js/6.5b9b407a.js" as="script"><link rel="preload" href="/start-from-scratch-learn-Vue/assets/js/4.38a22652.js" as="script"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/1.0bfa914b.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/10.e8c8ebca.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/11.a3835675.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/12.0feb4e88.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/13.1406cfc2.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/15.0f4c538d.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/16.1b80fc8e.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/17.1ef223ed.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/18.5049e164.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/19.911c77cb.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/20.c431ddf1.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/21.e560d7f1.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/22.882c08d4.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/23.fca31b6e.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/24.ed57b2bf.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/25.95cc7d20.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/26.04a3df81.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/27.e429a2b4.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/28.bc1ce72d.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/29.0fe03a1a.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/30.b61463a1.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/31.b17e616a.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/32.09d17a57.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/33.fabb5cd6.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/34.ef02a228.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/35.e5df072a.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/37.e999a276.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/38.ca7f12f4.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/39.92e3084a.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/40.896005b6.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/41.1148718e.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/42.a3cebe91.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/43.0addf868.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/44.1783ebef.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/45.d624ae1d.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/46.cacd11fa.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/47.db445ffc.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/48.e45ff621.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/7.dd297f9e.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/8.43225c1b.js"><link rel="prefetch" href="/start-from-scratch-learn-Vue/assets/js/9.03b7a281.js">
    <link rel="stylesheet" href="/start-from-scratch-learn-Vue/assets/css/0.styles.071acc1c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/start-from-scratch-learn-Vue/" class="home-link router-link-active"><!----> <span class="site-name">start-from-scratch-learn-Vue</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/shiyutim/start-from-scratch-learn-Vue" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/shiyutim/start-from-scratch-learn-Vue" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前言</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/start-from-scratch-learn-Vue/" class="sidebar-link">从零开始学习 Vue</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>简介</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/start-from-scratch-learn-Vue/introduction/installation.html" class="sidebar-link">安装</a></li><li><a href="/start-from-scratch-learn-Vue/introduction/introduce.html" class="sidebar-link">介绍</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>入门篇</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/start-from-scratch-learn-Vue/basics/instruct.html" class="sidebar-link">指令</a></li><li><a href="/start-from-scratch-learn-Vue/basics/class-and-style.html" class="sidebar-link">Class 与 Style 绑定</a></li><li><a href="/start-from-scratch-learn-Vue/basics/lifecycle.html" class="sidebar-link">生命周期 lifecycle</a></li><li><a href="/start-from-scratch-learn-Vue/basics/computed.html" class="active sidebar-link">计算属性 computed</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/start-from-scratch-learn-Vue/basics/computed.html#介绍" class="sidebar-link">介绍</a></li><li class="sidebar-sub-header"><a href="/start-from-scratch-learn-Vue/basics/computed.html#小例子" class="sidebar-link">小例子</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/start-from-scratch-learn-Vue/basics/computed.html#商品排序" class="sidebar-link">商品排序</a></li><li class="sidebar-sub-header"><a href="/start-from-scratch-learn-Vue/basics/computed.html#商品搜索" class="sidebar-link">商品搜索</a></li></ul></li></ul></li><li><a href="/start-from-scratch-learn-Vue/basics/watch.html" class="sidebar-link">侦听器 watch</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>进阶篇</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/start-from-scratch-learn-Vue/advanced/components.html" class="sidebar-link">组件 components</a></li><li><a href="/start-from-scratch-learn-Vue/advanced/filters.html" class="sidebar-link">过滤器 filters</a></li><li><a href="/start-from-scratch-learn-Vue/advanced/axios.html" class="sidebar-link">axios</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="计算属性-computed"><a href="#计算属性-computed" class="header-anchor">#</a> 计算属性 computed</h1> <p></p><div class="table-of-contents"><ul><li><a href="#介绍">介绍</a></li><li><a href="#小例子">小例子</a><ul><li><a href="#商品排序">商品排序</a></li><li><a href="#商品搜索">商品搜索</a></li></ul></li></ul></div><p></p> <h2 id="介绍"><a href="#介绍" class="header-anchor">#</a> 介绍</h2> <p>computed 是 Vue 提供用来处理复杂逻辑，可以像绑定普通属性一样绑定计算属性，并且计算属性的值会被缓存，除非依赖的值更新。</p> <p>首先解释一下<code>像绑定普通属性一样绑定计算属性</code>：绑定普通属性的方式为在<code>data</code>里面进行绑定</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span><span class="token punctuation">{</span>message<span class="token punctuation">}</span><span class="token punctuation">}</span>

<span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        message<span class="token operator">:</span> <span class="token string">'hello Vue'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>绑定<strong>计算属性</strong>为：</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token punctuation">{</span><span class="token punctuation">{</span>reverseMessage<span class="token punctuation">}</span><span class="token punctuation">}</span>

computed<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// es6</span>
    <span class="token function">reverseMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// es5</span>
    reverseMessage<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>可以看到，使用方式是相同的，都是使用模板语法<code>{{}}</code>。唯一不同的是，计算属性需要在<code>computed:{}</code>里面声明，并且是一个函数。</p> <p>同时注意，计算属性是一个函数，想要函数返回一个值需要使用<code>return</code>关键字，如果不使用<code>return</code>，会发现<em>这个计算属性</em>不会返回任何值，需要注意。</p> <p>计算属性的值也会被放入 Vue 实例里面。所以，你依然可以通过<code>this.reverseMessage</code>来访问对应的计算属性。</p> <blockquote><p>计算属性默认只有 getter ，不过在需要时你也可以提供一个 setter</p></blockquote> <p>计算属性默认只有 getter，意思是我们访问计算属性的时候，默认只返回值，不可以设置值。</p> <p>不过在需要时你也可以提供一个 setter，意思是可以设置一个 setter，用来改变计算属性的值。方式为：</p> <div class="language-js extra-class"><pre class="language-js"><code>computed<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// es6</span>
    reverseMessage<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">set</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">+</span> value
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// es5</span>
    reverseMessage<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">+</span> value
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>可以看到，<code>reverseMessage</code>改变了声明方式，使用了<code>get(){}</code>和<code>set(){}</code>。</p> <ul><li><code>get</code>就是返回值，跟声明的时候一样。</li> <li><code>set</code>是设置值，接收一个<code>value</code>，<code>value</code>为我们设置的值。比如说，<code>this.reverseMessage = '哈哈哈'</code>，那么<code>value</code>就是<code>哈哈哈</code>。</li></ul> <h2 id="小例子"><a href="#小例子" class="header-anchor">#</a> 小例子</h2> <p>计算属性应用来说相对比较多，下面我们分别看几个例子来理解一下计算属性的应用。一般情况下，使用计算属性的<code>getter</code>即可。</p> <h3 id="商品排序"><a href="#商品排序" class="header-anchor">#</a> 商品排序</h3> <p>大家看购物网站的时候，一般都会有排序的功能，比如说，按照价格排序，按照销量排序等。下面我们就来实现一下这个功能。同时为了真实的体验，我提供了一个简单的商品数据列表，接口地址为：<code>https://easy-mock.com/mock/5e1aa4ff7f109b0caa4d2e26/learnvue/commodity</code>（接口为 mock 数据（模拟数据），意味着每次请求的数据结果都不一样）。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>commodity<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>(item, index) in list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item.thumb<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item_img<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item.title}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>销量： {{item.sales}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>价格： {{item.price}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        list<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    computed<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    methods<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">initData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        axios
          <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>
            <span class="token string">'https://easy-mock.com/mock/5e1aa4ff7f109b0caa4d2e26/learnvue/commodity'</span>
          <span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> data <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token string">'data'</span><span class="token punctuation">)</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>list <span class="token operator">=</span> data<span class="token punctuation">.</span>list
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">updated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">destroyed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">.commodity</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">flex-direction</span><span class="token punctuation">:</span> row<span class="token punctuation">;</span>
    <span class="token property">flex-wrap</span><span class="token punctuation">:</span> wrap<span class="token punctuation">;</span>
    <span class="token property">justify-content</span><span class="token punctuation">:</span> flex-start<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.item</span> <span class="token punctuation">{</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.item_img</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="wrap" data-v-21dbd980><section class="commodity" data-v-21dbd980></section></div> <p>如果你复制上去后，发现页面渲染出来数据了，很棒是不是，这就是真实的接口+数据渲染方式。除了没有完善的错误处理和样式等🤗，不过暂时先不考虑。</p> <p>为了大家更好的理解计算属性，我准备把以上内容复习一下。</p> <ul><li>获取数据</li></ul> <p>这里使用<code>axios</code>获取数据（axios 最后会讲怎么使用），并在<code>created</code>里面调用（<code>created/mounted</code>都可以）。可以看到函数里面使用了<code>let data = res.data.data</code>，因为嵌套的层级比较深，为了下面代码更好的使用，所以声明了一个<code>data</code>变量。如果你认为没必要的话，请看：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 不使用变量</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>list <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">return</span>
res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>xxx <span class="token comment">// 操作其他值</span>

<span class="token comment">// 使用变量</span>
<span class="token keyword">let</span> data <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data

<span class="token keyword">this</span><span class="token punctuation">.</span>list <span class="token operator">=</span> data<span class="token punctuation">.</span>list
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>data<span class="token punctuation">.</span>list<span class="token punctuation">)</span> <span class="token keyword">return</span>
data<span class="token punctuation">.</span>xxx <span class="token comment">// 操作其他值</span>
</code></pre></div><ul><li>渲染操作</li></ul> <p><code>list</code>获取到对应的值后，<code>v-for</code>会自动进行渲染，<code>(item, index)</code> ，<code>item</code>代表被遍历的数组的每一项，即<code>list[0]、list[1]...list[n]</code>。<code>index</code>为当前遍历的索引值，也就是<code>0、1 ... n</code>。<code>:key=index</code>为<code>v-bind:key=index</code>，就是把当前的索引项的值绑定到<code>key</code>上。</p> <p>此时，通过<code>item.xxx</code>就能获取到对应的数据了，那么我们通过<code>{{}}</code>模板语法渲染数据即可。</p> <p>下面开始写具体的排序逻辑，我们选择按照<strong>价格排序</strong>。具体的逻辑就是使用计算属性对每个商品的价格，使用<code>sort</code>进行排序，排序好了之后 <code>v-for</code> 会自动渲染。</p> <p>首先我们先声明一个计算属性，叫<code>new_priceList</code>：</p> <div class="language-js extra-class"><pre class="language-js"><code>computed<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">new_priceList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>list
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>首先声明了一个计算属性<code>new_priceList</code>，不过目前我只写了返回<code>list</code>。那么意味着我们把<code>v-for</code>的<code>list</code>替换成<code>new_priceList</code>，页面还是正常渲染，不会有任何问题和报错。那么我们来试一下：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>(item, index) in new_priceList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>进行替换后，发现页面还是能够正常渲染的，这是我们使用计算属性的第一步。<strong>学会这一步</strong>，因为这可能是你以后经常使用计算属性的第一步。</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>记住，计算属性同样是响应式的，也就是说，如果<code>list</code>里面的内容变化了（<a href="https://cn.vuejs.org/v2/guide/list.html#%E6%95%B0%E7%BB%84%E6%9B%B4%E6%96%B0%E6%A3%80%E6%B5%8B" target="_blank" rel="noopener noreferrer">官网文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>有明确指出什么操作是响应式的），那么<code>new_priceList</code>里面的值同样会变化，如果<code>list</code>不变，那么<code>new_priceList</code>会被缓存起来，每次访问会直接返回。</p></div> <p>接下来就是排序的逻辑了，javaScript 提供了<code>sort</code>方法，用来排序。不过，大家可能知道，这个方法并不完美。所以我们需要改进一下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">new_priceList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> a<span class="token punctuation">.</span>price <span class="token operator">-</span> b<span class="token punctuation">.</span>price
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>sort</code>方法可以接收一个函数，如果返回值为负数，说明第一个值应该在第二个值前面，即第一个值小于第二个值。所以，返回后的数组为升序。</p> <div class="wrap" data-v-60b1f801><section class="commodity" data-v-60b1f801></section></div> <p>可以看到，现在的新数组已经是排序后的数组了。不过，我们需要的智能排序，需要我们手动点击升序或降序。那么就需要一个<strong>值</strong>来控制一下，到底是升序还是降序。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>tools<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>status = 1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>升序<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>status = 2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>降序<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      list<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      status<span class="token operator">:</span> <span class="token number">0</span> <span class="token comment">// 默认为0 即默认排序 1 为升序 2 为降序</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

computed<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">new_priceList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>status<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>list
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">?</span> a<span class="token punctuation">.</span>price <span class="token operator">-</span> b<span class="token punctuation">.</span>price <span class="token operator">:</span> b<span class="token punctuation">.</span>price <span class="token operator">-</span> a<span class="token punctuation">.</span>price
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

</code></pre></div><div class="wrap" data-v-8f814ff0><div class="tools" data-v-8f814ff0><button data-v-8f814ff0>升序</button> <button data-v-8f814ff0>降序</button></div> <section class="commodity" data-v-8f814ff0></section></div> <p>现在我们可以点击升序或降序按钮，可以控制商品的排序了。那么我们来解释一下最后一步的操作：</p> <ul><li>添加控制升序或降序的值</li></ul> <p>本例为<code>status</code>，为 0 说明默认排序，为 1 说明为升序，为 2 说明为降序。（这里的 0、1 和 2 是由自己定义的，你可以定义任何你想定义的值）</p> <ul><li><p>添加按钮来改变<code>status</code>的状态
使用<code>v-on:click</code>来改变状态，升序按钮为<code>status = 1</code>，降序按钮为<code>status = 2</code></p></li> <li><p>计算属性逻辑</p> <ul><li><p><code>if (!this.status) return this.list</code></p> <p>这里表示，如果为 0 的情况下，就返回默认的<code>list</code>数组。<code>!this.status</code>表示取 0 的反值。</p></li> <li><p><code>return this.status === 1 ? a.price - b.price : b.price - a.price</code></p> <p>这里使用三元表达式对当前的状态进行求值。如果为 1，则说明为<strong>升序</strong>，那么就返回<code>a.price - b.price</code>；如果为其他的值，就说明为<strong>降序</strong>，那么就返回<code>b.price - a.price</code>。</p> <p><strong>注意嗷</strong>，<code>status</code>还有为 0 的情况，所以我们在进入函数之前就判断了，如果为 0，那么就返回默认的<code>list</code>数组，而不会走到三元表达式这里。</p></li></ul></li></ul> <p>到这里基本就讲完了一个排序小例子，看完后，记得自己重新实践一下。如果还没有理解到位，那么请看下面的另一个小例子。</p> <h3 id="商品搜索"><a href="#商品搜索" class="header-anchor">#</a> 商品搜索</h3> <p>一般来说，搜索是通过 http 请求，来跟后台进行交互，然后只渲染后台返回过来筛选后的数据就可以了。不过，我们通过计算属性也可以做到筛选功能，而且更快，更高效。唯一的缺点就是，如果有分页，那么搜索只会搜索到当前页的数据，而通过 http 请求，后台会把所有关于搜索的数据发送过来。</p> <p>商品搜索，可以根据商品标题进行搜索，返回标题中带有搜索关键字的商品就可以了。我们通过<code>includes</code>或者<code>indexOf</code>实现这个功能。还需要一个方法来遍历数组，并返回一个新数组，大家可以先思考一下使用哪个方法。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>wrap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>tools<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>search<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>commodity<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>(item, index) in new_titleList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item.thumb<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item_img<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{ item.title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>销量： {{ item.sales }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>价格： {{ item.price }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        list<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        search<span class="token operator">:</span> <span class="token string">''</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    computed<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">new_titleList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>list
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    methods<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">initData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        axios
          <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>
            <span class="token string">'https://easy-mock.com/mock/5e1aa4ff7f109b0caa4d2e26/learnvue/commodity'</span>
          <span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> data <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token string">'data'</span><span class="token punctuation">)</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>list <span class="token operator">=</span> data<span class="token punctuation">.</span>list
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">updated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">destroyed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">.commodity</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">flex-direction</span><span class="token punctuation">:</span> row<span class="token punctuation">;</span>
    <span class="token property">flex-wrap</span><span class="token punctuation">:</span> wrap<span class="token punctuation">;</span>
    <span class="token property">justify-content</span><span class="token punctuation">:</span> flex-start<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.item</span> <span class="token punctuation">{</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.item_img</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="wrap" data-v-0d6d5d27><div class="tools" data-v-0d6d5d27><input type="text" value="" data-v-0d6d5d27></div> <section class="commodity" data-v-0d6d5d27></section></div> <p>还记得<code>v-model</code>吗？本例就通过<code>v-model</code>把<code>input</code>绑定到变量<code>search</code>上。那么，我们输入的任何值，都储存在<code>search</code>变量上。</p> <p>还是跟以前一样，第一步先初始化一个<code>new_titleList</code>的计算属性，表示这是一个新的数组。并把<code>v-for</code>里面的<code>list</code>替换为<code>new_titleList</code>。接着，我们就开始具体的搜索逻辑</p> <div class="language-js extra-class"><pre class="language-js"><code>  computed<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">new_titleList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>search <span class="token operator">===</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>list
      <span class="token punctuation">}</span>

      <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> item<span class="token punctuation">.</span>title<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>search<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> arr
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><ul><li><p><code>if (this.search === '') { return this.list }</code></p> <p>这一步表示，如果搜索内容为空的话，就返回默认的数组。可以写成这种形式：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>search<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>list
</code></pre></div></li> <li><p>接下来就是遍历数组，然后返回标题中带有搜索关键字的商品了。我们选择使用<code>filter</code>，因为<code>filter</code>能够<strong>返回一个新数组</strong>。<code>arr</code>代表着过滤后的数组，所以返回它即可。下面我们来看具体的过滤逻辑</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> item<span class="token punctuation">.</span>title<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>search<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><p>上面的<code>item</code>同样代表 list 里面的每一项</p></li> <li><p><code>item.title</code>就是我们要过滤的标题了</p></li> <li><p><code>this.search</code>就是用户输入过滤的关键字</p></li> <li><p>我们通过 js 的<code>includes</code>方法对标题进行过滤，表示<strong>如果标题中含有搜索关键字，那么就返回这一项</strong>。这一步可以写成</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">return</span> item<span class="token punctuation">.</span>title<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>search<span class="token punctuation">)</span>
</code></pre></div></li> <li><p>还有一点，我们可以完善一下，就是<code>let arr</code>这一步，因为我们知道，<code>arr</code>里面存放的就是过滤后的数组，那么我们为何不省略这一步把<code>let arr</code>换成直接 <code>return</code>呢</p></li></ul></li></ul> <p>经过以上分析，我们可以把上面代码优化成：</p> <div class="language-js extra-class"><pre class="language-js"><code>  computed<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">new_titleList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>search <span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>list

        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> item<span class="token punctuation">.</span>title<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>search<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>相信大家经过以上两个小例子能够对计算属性有了一个深入的了解，计算属性应用非常广泛，大家应该重点掌握。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2/3/2020, 9:47:35 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/start-from-scratch-learn-Vue/basics/lifecycle.html" class="prev">
        生命周期 lifecycle
      </a></span> <span class="next"><a href="/start-from-scratch-learn-Vue/basics/watch.html">
        侦听器 watch
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/start-from-scratch-learn-Vue/assets/js/app.55c1e2f7.js" defer></script><script src="/start-from-scratch-learn-Vue/assets/js/3.5f662852.js" defer></script><script src="/start-from-scratch-learn-Vue/assets/js/36.2bff6695.js" defer></script><script src="/start-from-scratch-learn-Vue/assets/js/14.048f971c.js" defer></script><script src="/start-from-scratch-learn-Vue/assets/js/5.cb2e8bbe.js" defer></script><script src="/start-from-scratch-learn-Vue/assets/js/6.5b9b407a.js" defer></script><script src="/start-from-scratch-learn-Vue/assets/js/4.38a22652.js" defer></script>
  </body>
</html>
